<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />

<script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="barcodescanner.js"></script>
        <script type="text/javascript" src="childbrowser.js"></script>
        <script type="text/javascript" src="js/app.js"></script>

	<script type="text/javascript" src="js/funcoes_fabricante.js"></script>

<script>

var senha = "";

function senha_otp(){

senha = "";

document.getElementById("senha").innerHTML = "<iframe name='otp' id='otp'></iframe>";
var iframe_senha = document.getElementById("otp").contentWindow.document;
iframe_senha.open();

iframe_senha.write("Senha OTP:<BR>");
for(i=1;i<5;i++) {
	digito = Math.floor((Math.random() * 10));
	iframe_senha.write("<img src=imagens/"+digito+".gif>");
	senha = senha+digito;
}
iframe_senha.close();

}


function chama_suporte() {

contra_senha = prompt("Digite a senha OTP para confirmar o registro dos dados.");

if (contra_senha == senha) {

	document.getElementById("janela").innerHTML = "<iframe name='VID' id='VID'></iframe>";

	var iframeDoc = document.getElementById("VID").contentWindow.document;
	iframeDoc.open();
	iframeDoc.write("<form name='formulario' action='http://v-id.net/demo/farma/funcoes/registro_recebimento.php' method='POST'><INPUT TYPE='hidden' NAME='fid' id='fid' SIZE='50' readonly='readonly'><INPUT TYPE='hidden' NAME='fanvisa' id='fanvisa' MAXLENGTH='13' SIZE='20' readonly='readonly'><INPUT TYPE='hidden' NAME='fserial' id='fserial' MAXLENGTH='20' SIZE='20' readonly='readonly'><INPUT TYPE='hidden' NAME='fvalidade' id='fvalidade' MAXLENGTH='5' SIZE='20' readonly='readonly'><INPUT TYPE='hidden' NAME='flote' id='flote' MAXLENGTH='20' SIZE='20' readonly='readonly'><INPUT TYPE='hidden' NAME='fnatureza' id='fnatureza' readonly='readonly'><INPUT TYPE='hidden' NAME='fdestino' id='fdestino' MAXLENGTH='14' SIZE='14' readonly='readonly'><INPUT TYPE='hidden' NAME='ftransportadora' id='ftransportadora' MAXLENGTH='14' SIZE='14' readonly='readonly'><INPUT TYPE='hidden' NAME='fnfe' id='fnfe' readonly='readonly'><INPUT TYPE='hidden' NAME='conteudo' id='conteudo' readonly='readonly'><input type='hidden' name='dados' id='dados' readonly='readonly'><input type='hidden' name='registros' id='registros' size='5' readonly='readonly'><INPUT TYPE='hidden' NAME='campos' id='campos' readonly size='2' readonly='readonly'></frame>");
	iframeDoc.close();

	parent.VID.formulario.fid.value = document.getElementById("fid").value;
	parent.VID.formulario.fanvisa.value = document.getElementById("fanvisa").value;
	parent.VID.formulario.fserial.value = document.getElementById("fserial").value;
	parent.VID.formulario.fvalidade.value = document.getElementById("fvalidade").value;
	parent.VID.formulario.flote.value = document.getElementById("flote").value;
	parent.VID.formulario.fnatureza.value = document.getElementById("fnatureza").value;
	parent.VID.formulario.fdestino.value = document.getElementById("fdestino").value;
	parent.VID.formulario.ftransportadora.value = document.getElementById("ftransportadora").value;
	parent.VID.formulario.fnfe.value = document.getElementById("fnfe").value;
	//parent.VID.formulario.fcfop.value = document.getElementById("fcfop").value;
	parent.VID.formulario.conteudo.value = document.getElementById("conteudo").value;
	parent.VID.formulario.dados.value = document.getElementById("dados").value;
	parent.VID.formulario.registros.value = document.getElementById("registros").value;
	parent.VID.formulario.campos.value = document.getElementById("campos").value;

	senha = Math.floor((Math.random() * 10000));
	envio();
	}
	else{
		alert("Senha Invalida! Operacao Cancelada!");
	}

}
</script>

</head>

<body>

<style type="text/css"> 
body { 
background-image: url("imagens/fundop.jpg"); 
background-repeat: no-repeat; 
background-position: 5px 10px;  
} 
</style> 

<form name="formulario" action="http://v-id.net/demo/farma/funcoes/registro_recebimento.php" method="POST">

<font size="1">
<div style="position:absolute;left:20px; top:280px ">v-id:<br>
<INPUT TYPE="text" NAME="fid" id="fid" SIZE="50" readonly="readonly">
</div>

<div style="position:absolute;left:20px; top:50px ">Produto:<br>
<IFRAME NAME="CampoFoto" SRC="imagens/foto.jpg" ALIGN="left" HEIGHT="200" WIDTH="200" SCROLLING="NO" FRAMEBORDER="0"> </IFRAME>
</div>

<div style="position:absolute;left:220px; top:40px "><font size="1">Reg. ANVISA: <br>
<INPUT TYPE="text" NAME="fanvisa" id="fanvisa" MAXLENGTH="13" SIZE="20" readonly="readonly">
</div>

<div style="position:absolute;left:220px; top:100px "><font size="1">Serial: <br>
<INPUT TYPE="text" NAME="fserial" id="fserial" MAXLENGTH="20" SIZE="20" readonly="readonly">
</div>

<div style="position:absolute;left:220px; top:160px "><font size="1">Validade: <br>
<INPUT TYPE="text" NAME="fvalidade" id="fvalidade" MAXLENGTH="5" SIZE="20" readonly="readonly">
</div>

<div style="position:absolute;left:220px; top:220px "><font size="1">Lote: <br>
<INPUT TYPE="text" NAME="flote" id="flote" MAXLENGTH="20" SIZE="20" readonly="readonly">
</div>

<div style="position:absolute;left:450px; top:40px "><font size="3">Natureza da Operacao: <br>

<INPUT TYPE="radio" NAME="fnatureza" id="fnatureza" onchange = "document.getElementById('fnatureza').value = '(2) recebimento - (1) compra'"> Compra<BR>
<INPUT TYPE="radio" NAME="fnatureza" id="fnatureza" onchange = "document.getElementById('fnatureza').value = '(2) recebimento - (2) transferencia'"> Transferencia<BR>
<INPUT TYPE="radio" NAME="fnatureza" id="fnatureza" onchange = "document.getElementById('fnatureza').value = '(2) recebimento - (3) doacao'"> Doacao<BR>
<INPUT TYPE="radio" NAME="fnatureza" id="fnatureza" onchange = "document.getElementById('fnatureza').value = '(2) recebimento - (4) devolucao'"> Devolucao<BR>
<INPUT TYPE="radio" NAME="fnatureza" id="fnatureza" onchange = "document.getElementById('fnatureza').value = '(2) recebimento - (5) recolhimento'"> Recolhimento<BR>
<INPUT TYPE="radio" NAME="fnatureza" id="fnatureza" onchange = "document.getElementById('fnatureza').value = '(2) recebimento - (6) amostra gratis'"> Amostra Gratis<BR>

CNPJ Destino:<BR><input type="text" name="fdestino" id="fdestino" MAXLENGTH='14' SIZE='14' onChange="validadestino()"><BR>
CNPJ Transportadora:<BR><input type="text" name="ftransportadora" id="ftransportadora" MAXLENGTH='14' SIZE='14' onblur="validatransportadora()"><BR>
Numero da NF:<BR><input type="text" name="fnfe" id="fnfe"><BR>


</div>

<div style="position:absolute;left:50px; top:330px ">

<INPUT TYPE="button" VALUE="Limpa" onClick="reset()">
<input type="button" value="Captura" onclick="startScan()">

<input type="button" value="Gera OTP"  onClick="senha_otp()">

<BR>_____________________________________________________________________________________<BR>


<INPUT TYPE="hidden" NAME="conteudo" id="conteudo">
<BR>
<BR><BR>Registro para Processamento em Lote:<BR>
<TEXTAREA NAME="texto" id="texto" form="formulario" rows=10 cols=70></TEXTAREA>
<input type="hidden" name="dados" id="dados">
<input type="button" value="REGISTRA" onClick="validaArquivo()"><BR>

Foram encontrados <input type="text" name="registros" id="registros" size="5" readonly="readonly"> registos com <INPUT TYPE="text" NAME="campos" id="campos" readonly="readonly" size="2"> campos.

</form>

</div>

<div name="janela" id="janela" style="position:absolute;left:650px; top:10px ">Registro existente:<br>
</div>

<div name="senha" id="senha" style="position:absolute;left:650px; top:200px ">
</div>

</body>
</html>
